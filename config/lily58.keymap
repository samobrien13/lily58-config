/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>

#include <dt-bindings/zmk/keys.h>

#define ZMK_POINTING_DEFAULT_MOVE_VAL 2000
#define ZMK_POINTING_DEFAULT_SCRL_VAL 60

#include <dt-bindings/zmk/mouse.h>
#include <dt-bindings/zmk/pointing.h>

#include "zmk-helpers/helper.h"
#include "zmk-helpers/key-labels/lily58.h"

#define KEYS_L LT0 LT1 LT2 LT3 LT4 LT5 LM0 LM1 LM2 LM3 LM4 LM5 LB0 LB1 LB2 LB3 LB4 LB5 LF0 LF1 LF2 LF3 LF4 LF5 LEC
#define KEYS_R RT0 RT1 RT2 RT3 RT4 RT5 RM0 RM1 RM2 RM3 RM4 RM5 RB0 RB1 RB2 RB3 RB4 RB5 RF0 RF1 RF2 RF3 RF4 RF5 REC
#define KEYS_T LH3 LH2 LH1 LH0 RH0 RH1 RH2 RH3

#define DEFAULT    0
#define NAVIGATION 1
#define MOUSE      2
#define NUMBER     3
#define MEDIA      4

#include "includes/settings.dtsi"
#include "includes/behaviours_mods.dtsi"
#include "includes/combos.dtsi"

/ {
    keymap {
        compatible = "zmk,keymap";

        base {
            display-name = "Base";
            bindings = <
// ╭────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────╮                                                           ╭────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┬────────────────────────┬────────────────────────╮
     &none                    &kp N7                   &kp N5                   &kp N3                   &kp N1                   &kp N9                                                                               &kp N0                   &kp N2                   &kp N4                   &kp N6                  &kp N8                   &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &kp LBKT                 &kp Q                    &kp W                    &kp F                    &kp P                    &kp B                                                                                &kp J                    &kp L                    &kp U                    &kp Y                   &kp SEMI                 &kp RBKT
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &kp GRAVE                &hm_l LCTRL A            &hm_l LALT R             &hm_l LGUI S             &hm_shift_l LSHIFT T     &kp G                                                                                &kp M                    &hm_shift_r RSHIFT N     &hm_r RGUI E             &hm_r RALT I            &hm_r RCTRL O            &kp SQT
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│────────────────────────╮         ╭────────────────────────│────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp Z                    &kp X                    &kp C                    &kp D                    &kp V                    &kp MINUS                          &kp EQUAL                &kp K                    &kp H                    &kp COMMA                &kp DOT                 &kp FSLH                 &kp BSLH
// ╰────────────────────────┴────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┤────────────────────────╯         ╰────────────────────────├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┴────────────────────────╯
                                                       &none                    &th_lt MEDIA ESC         &th_lt NAVIGATION TAB    &th_lt MOUSE SPACE                                                                   &kp RET                  &th_lt NUMBER BSPC       &kp DEL                  &none
//                                                   ╰────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────╯                                                           ╰────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────╯
            >;
        };

        navigation {
            bindings = <
// ╭────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────╮                                                           ╭────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┬────────────────────────┬────────────────────────╮
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp LCTRL                &kp LALT                 &kp LGUI                 &kp LSHIFT               &none                                                                                &kp CAPS                 &kp LEFT                 &kp DOWN                 &kp UP                  &kp RIGHT                &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│────────────────────────╮         ╭────────────────────────│────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                    &none                              &none                    &kp INS                  &kp HOME                 &kp PAGE_DOWN            &kp PAGE_UP             &kp END                  &none
// ╰────────────────────────┴────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┤────────────────────────╯         ╰────────────────────────├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┴────────────────────────╯
                                                       &none                    &none                    &none                    &none                                                                                &trans                   &trans                   &trans                   &none
//                                                   ╰────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────╯                                                           ╰────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────╯
            >;
        };

        mouse {
            bindings = <
// ╭────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────╮                                                           ╭────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┬────────────────────────┬────────────────────────╮
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp LCTRL                &kp LALT                 &kp LGUI                 &kp LSHIFT               &none                                                                                &none                    &mmv MOVE_LEFT           &mmv MOVE_DOWN           &mmv MOVE_UP            &mmv MOVE_RIGHT          &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│────────────────────────╮         ╭────────────────────────│────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                    &none                              &none                    &none                    &msc SCRL_LEFT           &msc SCRL_DOWN           &msc SCRL_UP            &msc SCRL_RIGHT          &none
// ╰────────────────────────┴────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┤────────────────────────╯         ╰────────────────────────├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┴────────────────────────╯
                                                       &none                    &none                    &none                    &none                                                                                &mkp LCLK                &mkp MCLK                &mkp RCLK                &none
//                                                   ╰────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────╯                                                           ╰────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────╯
            >;
        };

        number {
            bindings = <
// ╭────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────╮                                                           ╭────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┬────────────────────────┬────────────────────────╮
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp LBKT                 &kp N7                   &kp N8                   &kp N9                   &kp RBKT                                                                             &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp SEMI                 &kp N6                   &kp N5                   &kp N6                   &kp EQUAL                                                                            &none                    &kp RSHIFT               &kp RGUI                 &kp RALT                &kp RCTRL                &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│────────────────────────╮         ╭────────────────────────│────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp GRAVE                &kp N1                   &kp N2                   &kp N3                   &kp BSLH                 &none                              &none                    &none                    &none                    &none                    &none                   &none                    &none
// ╰────────────────────────┴────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┤────────────────────────╯         ╰────────────────────────├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┴────────────────────────╯
                                                       &none                    &kp DOT                  &kp N0                   &kp MINUS                                                                            &none                    &none                    &none                    &none
//                                                   ╰────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────╯                                                           ╰────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────╯
            >;
        };

        media {
            bindings = <
// ╭────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────┬────────────────────────╮                                                           ╭────────────────────────┬────────────────────────┬────────────────────────┬───────────────────────┬────────────────────────┬────────────────────────╮
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                                                                                &none                    &none                    &none                    &none                   &none                    &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│                                                           │────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &kp LCTRL                &kp LALT                 &kp LGUI                 &kp LSHIFT               &none                                                                                &none                    &kp C_PREV               &kp C_VOLUME_DOWN        &kp C_VOLUME_UP         &kp C_NEXT               &none
// │────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────│────────────────────────╮         ╭────────────────────────│────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┼────────────────────────│
     &none                    &none                    &none                    &none                    &none                    &none                    &none                              &none                    &none                    &none                    &none                    &none                   &none                    &none
// ╰────────────────────────┴────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┼────────────────────────┤────────────────────────╯         ╰────────────────────────├────────────────────────┼────────────────────────┼────────────────────────┼───────────────────────┼────────────────────────┴────────────────────────╯
                                                       &none                    &none                    &none                    &none                                                                                &kp C_STOP               &kp C_PLAY               &kp C_MUTE               &none
//                                                   ╰────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────╯                                                           ╰────────────────────────┴────────────────────────┴────────────────────────┴───────────────────────╯
            >;
        };
    };
};
